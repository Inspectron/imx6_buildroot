From a6e3032a725a443ff8701fca3635613a4d1c8275 Mon Sep 17 00:00:00 2001
From: Yazan Shhady <yazan.shhady@solid-run.com>
Date: Thu, 7 Jul 2022 13:38:20 +0300
Subject: [PATCH] mx6cuboxi: update the boot envirnoment - add support for
 HB-CBI

When use HB-CBI: set the is_cbi environment variable to be yes (is_cbi=yes)

Note: the defaut value of is_cbi variable is no (is_cbi=no)
---
 include/configs/mx6cuboxi.h | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/include/configs/mx6cuboxi.h b/include/configs/mx6cuboxi.h
index 5e1fe5e760..230f05dbf7 100644
--- a/include/configs/mx6cuboxi.h
+++ b/include/configs/mx6cuboxi.h
@@ -101,6 +101,7 @@
 	"initrd_high=0xffffffff\0" \
 	"fdt_high=0xffffffff\0" \
 	"ip_dyn=yes\0" \
+	"is_cbi=no\0" \
 	"console=" CONSOLE_DEV ",115200\0" \
 	"bootm_size=0x10000000\0" \
 	"mmcdev=" __stringify(CONFIG_SYS_MMC_ENV_DEV) "\0" \
@@ -125,10 +126,12 @@
 			"setenv fdtprefix imx6dl; fi; " \
 		"if test ${som_rev} = V15; then " \
 			"setenv fdtsuffix -som-v15; fi; " \
+		"if test ${is_cbi} = yes; then " \
+			"setenv cbisuffix -cbi; fi; " \
 		"if test ${has_emmc} = yes; then " \
 			"setenv emmcsuffix -emmc; fi; " \
 		"if test ${board_name} = HUMMINGBOARD2 ; then " \
-			"setenv fdtfile ${fdtprefix}-hummingboard2${emmcsuffix}${fdtsuffix}.dtb; fi; " \
+			"setenv fdtfile ${fdtprefix}-hummingboard2${cbisuffix}${emmcsuffix}${fdtsuffix}.dtb; fi; " \
 		"if test ${board_name} = HUMMINGBOARD ; then " \
 			"setenv fdtfile ${fdtprefix}-hummingboard${emmcsuffix}${fdtsuffix}.dtb; fi; " \
 		"if test ${board_name} = CUBOXI ; then " \
-- 
2.25.1

